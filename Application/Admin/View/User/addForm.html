<extend name="Public:layout" />
<block name="main-content">
    <!-- BEGIN PAGE CONTAINER-->
    <div class="container-fluid">
        <!-- BEGIN PAGE HEADER-->
        <div class="row-fluid">
            <div class="span12">
                <!-- BEGIN STYLE CUSTOMIZER -->
                <div class="color-panel hidden-phone">
                    <div class="color-mode-icons icon-color"></div>
                    <div class="color-mode-icons icon-color-close"></div>
                    <div class="color-mode">
                        <p>THEME COLOR</p>
                        <ul class="inline">
                            <li class="color-black current color-default" data-style="default"></li>
                            <li class="color-blue" data-style="blue"></li>
                            <li class="color-brown" data-style="brown"></li>
                            <li class="color-purple" data-style="purple"></li>
                            <li class="color-grey" data-style="grey"></li>
                            <li class="color-white color-light" data-style="light"></li>
                        </ul>
                        <label>
                            <span>Layout</span>
                            <select class="layout-option m-wrap small">
                                <option value="fluid" selected>Fluid</option>
                                <option value="boxed">Boxed</option>
                            </select>
                        </label>
                        <label>
                            <span>Header</span>
                            <select class="header-option m-wrap small">
                                <option value="fixed" selected>Fixed</option>
                                <option value="default">Default</option>
                            </select>
                        </label>
                        <label>
                            <span>Sidebar</span>
                            <select class="sidebar-option m-wrap small">
                                <option value="fixed">Fixed</option>
                                <option value="default" selected>Default</option>
                            </select>
                        </label>
                        <label>
                            <span>Footer</span>
                            <select class="footer-option m-wrap small">
                                <option value="fixed">Fixed</option>
                                <option value="default" selected>Default</option>
                            </select>
                        </label>
                    </div>
                </div>
                <!-- END BEGIN STYLE CUSTOMIZER -->
                <h3 class="page-title">
                    用户管理
                    <small>添加用户</small>
                </h3>
                <ul class="breadcrumb">
                    <li>
                        <i class="icon-home"></i>
                        <a href="index.html">用户管理</a>
                        <span class="icon-angle-right"></span>
                    </li>
                    <li>
                        <a href="#">管理员</a>
                        <span class="icon-angle-right"></span>
                    </li>
                    <li><a href="addform">添加用户</a></li>
                </ul>
            </div>
        </div>
        <!-- END PAGE HEADER-->
        <!-- BEGIN PAGE CONTENT-->
        <div class="row-fluid">
            <div class="span12">
                <!-- BEGIN SAMPLE FORM PORTLET-->
                <div class="portlet box blue tabbable">
                    <div class="portlet-title">
                        <div class="caption">
                            <i class="icon-reorder"></i>
                            <span class="hidden-480"> 填写新用户信息</span>
                        </div>
                    </div>
                    <div class="portlet-body form">
                        <div class="tabbable portlet-tabs">
                            <ul class="nav nav-tabs">
                                <!--<li><a href="#portlet_tab3" data-toggle="tab">Inline</a></li>-->
                                <!--<li><a href="#portlet_tab2" data-toggle="tab">Grid</a></li>-->
                                <li class="active"><a href="#portlet_tab1" data-toggle="tab">Default</a></li>
                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane active" id="portlet_tab1">
                                    <!-- BEGIN FORM-->
                                    <form action="__CONTROLLER__/adminAdd" name="addForm" method="post" class="form-horizontal">
                                        <!--用户名--><span style="height:20px;display: inline-block"></span>
                                        <div class="control-group">
                                            <label class="control-label">用户名：</label>
                                            <div class="controls">
                                                <input type="text" name="user_name" placeholder="用户名" class="m-wrap large" />
                                                <span class="help-inline" style="color:red">*</span>
                                            </div>
                                        </div>
                                        <!--密码--><span style="height:20px;display: inline-block"></span>
                                        <div class="control-group">
                                            <label class="control-label">密 码：</label>
                                            <div class="controls">
                                                <input type="password" name="password" placeholder="密码" class="m-wrap large" />
                                                <span class="help-inline" style="color:red">*</span>
                                            </div>
                                        </div>
                                        <!--昵称--><span style="height:20px;display: inline-block"></span>
                                        <div class="control-group">
                                            <label class="control-label">昵 称：</label>
                                            <div class="controls">
                                                <input type="text" name="nick_name" placeholder="昵称" class="m-wrap large" />
                                                <!--<span class="help-inline" style="color:red">*</span>-->
                                            </div>
                                        </div>
                                        <!--邮箱--><span style="height:20px;display: inline-block"></span>
                                        <div class="control-group">
                                            <label class="control-label">邮 箱：</label>
                                            <div class="controls">
                                                <input type="email" name="email" placeholder="输入邮箱" class="m-wrap large" />
                                                <span class="help-inline" style="color:red">*</span>
                                            </div>
                                        </div>
                                        <!--用户类别--><span style="height:20px;display: inline-block"></span>
                                        <div class="control-group">
                                            <label class="control-label">用户类别：</label>
                                            <div class="controls">
                                                <select class="large m-wrap" name="user_cat" tabindex="1">
                                                    <option value="">--请选择--</option>
                                                    <option value="1">管理员</option>
                                                    <option value="2">景点管理员</option>
                                                    <option value="3">酒店管理员</option>
                                                    <option value="4">普通用户</option>
                                                </select>
                                            </div>
                                        </div>
                                        <!--用户性别--><span style="height:20px;display: inline-block"></span>
                                        <div class="control-group">
                                            <label class="control-label">性 别：</label>
                                            <div class="controls">
                                                <label class="radio">
                                                    <input type="radio" name="sex" value="1" checked/>
                                                    男
                                                </label>
                                                <label class="radio">
                                                    <input type="radio" name="sex" value="2"  />
                                                    女
                                                </label>
                                                <span class="help-inline" style="color:red">*</span>
                                            </div>
                                        </div>
                                        <!--提交-重置--><span style="height:20px;display: inline-block"></span>
                                        <div class="form-actions">
                                            <button type="button" id="btn-add" class="btn blue"><i class="icon-ok"></i> 保 存</button>
                                            <button type="reset" class="btn"><i class="icon-reply"></i>重 置</button>
                                        </div>
                                    </form>
                                    <!-- END FORM-->
                                </div>
                                <script src="__PUBLIC__/media/js/jquery-1.10.1.min.js" type="text/javascript"></script>

                                <script type="text/javascript">
                                    $(function(){
                                        $("#btn-add").click(function(){
                                            var user_name=document.addForm.user_name.value;
                                            var password=document.addForm.password.value;
                                            var nick_name=document.addForm.nick_name.value;
                                            var email=document.addForm.email.value;
                                            var user_cat=document.addForm.user_cat.value;
                                            var sex=document.addForm.sex.value;
//                                            alert(user_name+password+nick_name+"email:"+email+"sex:"+sex+"等级："+band);return false;
                                            if(user_name.match(/^\s*$/)){
                                                alert("用户名不能为空！");
                                                return false;
                                            }
                                            if(password.match(/^\s*$/)){
                                                alert("密码不能为空！");
                                                return false;
                                            }
                                            if(email.match(/^\s*$/)){
                                                alert("邮箱不能为空！");
                                                return false;
                                            }
                                            if(user_cat.match(/^\s*$/)){
                                                alert("用户类型未选择！");
                                                return false;
                                            }
                                            $.ajax({
                                                url: "/trip.com/index.php/Admin/user/adminAdd",    //请求的url地址
                                                dataType: "json",   //返回格式为json
                                                async: true, //请求是否异步，默认为异步，这也是ajax重要特性
                                                data: { "user_name": user_name,"password":password,"nick_name":nick_name,"email":email,"user_cat":user_cat,"sex":sex },    //参数值
                                                type: "post",   //请求方式
                                                success: function(req) {
                                                    //请求成功时处理
                                                    if(req.status == true){
                                                        alert(req.msg);
                                                        window.location.href="__MODULE__/user/adminList";
                                                    }else{
                                                        alert(req.msg);
                                                        return false;
                                                    }
                                                },
                                                error: function() {
                                                    //请求出错处理
                                                }
                                            });
                                        });
                                    })
                                </script>

                            </div>
                        </div>
                    </div>
                </div>
                <!-- END SAMPLE FORM PORTLET-->
            </div>
        </div>
        <!-- END PAGE CONTENT-->
    </div>
    <!-- END PAGE CONTAINER-->
</block>